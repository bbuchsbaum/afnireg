* using log directory ‘/Users/bbuchsbaum/code/afnireg/..Rcheck’
* using R version 4.3.2 (2023-10-31)
* using platform: aarch64-apple-darwin20 (64-bit)
* R was compiled by
    Apple clang version 14.0.0 (clang-1400.0.29.202)
    GNU Fortran (GCC) 12.2.0
* running under: macOS Sonoma 14.3
* using session charset: UTF-8
* using options ‘--no-manual --no-build-vignettes’
* checking for file ‘./DESCRIPTION’ ... OK
* checking extension type ... Package
* this is package ‘afnireg’ version ‘0.1.0’
* package encoding: UTF-8
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... NOTE
Found the following hidden files and directories:
  ..Rcheck
  .claude
  .git
These were most likely included in error. See section ‘Package
structure’ in the ‘Writing R Extensions’ manual.
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking whether package ‘afnireg’ can be installed ... WARNING
Found the following significant warnings:
  Warning: replacing previous import ‘fmridataset::blocklens’ by ‘fmridesign::blocklens’ when loading ‘afnireg’
  Warning: replacing previous import ‘fmridataset::samples’ by ‘fmridesign::samples’ when loading ‘afnireg’
  Warning: replacing previous import ‘fmridataset::blockids’ by ‘fmridesign::blockids’ when loading ‘afnireg’
  Warning: replacing previous import ‘fmridesign::blockids’ by ‘fmrihrf::blockids’ when loading ‘afnireg’
  Warning: replacing previous import ‘fmridesign::onsets’ by ‘fmrihrf::onsets’ when loading ‘afnireg’
  Warning: replacing previous import ‘fmridesign::durations’ by ‘fmrihrf::durations’ when loading ‘afnireg’
  Warning: replacing previous import ‘fmrihrf::blockids’ by ‘fmridesign::blockids’ when loading ‘afnireg’
See ‘/Users/bbuchsbaum/code/afnireg/..Rcheck/00install.out’ for details.
* checking installed package size ... OK
* checking package directory ... OK
* checking DESCRIPTION meta-information ... NOTE
Checking should be performed on sources prepared by ‘R CMD build’.
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... WARNING
Found the following directory with the name of a check directory:
  ./..Rcheck
Most likely, these were included erroneously.
Subdirectory ‘inst’ contains no files.
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ... OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking loading without being on the library search path ... OK
* checking startup messages can be suppressed ... OK
* checking dependencies in R code ... NOTE
Namespace in Imports field not imported from: ‘progress’
  All declared Imports should be used.
* checking S3 generic/method consistency ... WARNING
build_afni_stims:
  function(x, ...)
build_afni_stims.convolved_term:
  function(x, iresp, tr_times)

build_afni_stims:
  function(x, ...)
build_afni_stims.afni_hrf_convolved_term:
  function(x, iresp, tr_times)

build_afni_stims:
  function(x, ...)
build_afni_stims.afni_trialwise_convolved_term:
  function(x, iresp, tr_times)

shortnames:
  function(x, ...)
shortnames.afni_trialwise_convolved_term:
  function(x)

is_continuous:
  function(x, ...)
is_continuous.afni_trialwise_convolved_term:
  function(x)

nbasis:
  function(x, ...)
nbasis.afni_trialwise_convolved_term:
  function(x)

nbasis:
  function(x, ...)
nbasis.afni_hrf_convolved_term:
  function(x)
See section ‘Generic functions and methods’ in the ‘Writing R
Extensions’ manual.
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... NOTE
File ‘afnireg/R/zzz.R’:
  .onLoad calls:
    packageStartupMessage("AFNI HRF specifications registered with fmridesign")

See section ‘Good practice’ in '?.onAttach'.

gen_afni_lm.fmri_config: no visible global function definition for
  ‘gen_model_spec’
Undefined global functions or variables:
  gen_model_spec
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... WARNING
Undocumented code objects:
  ‘AFNI_BLOCK’ ‘AFNI_CSPLIN’ ‘AFNI_GAM’ ‘AFNI_POLY’ ‘AFNI_SIN’
  ‘AFNI_SPMG1’ ‘AFNI_SPMG2’ ‘AFNI_SPMG3’ ‘AFNI_TENT’ ‘AFNI_WAV’
  ‘AFNI_dmBLOCK’
All user-level objects in a package should have documentation entries.
See chapter ‘Writing R documentation files’ in the ‘Writing R
Extensions’ manual.
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... WARNING
Undocumented arguments in documentation object 'afni_lm_spec'
  ‘model’ ‘dataset’ ‘working_dir’ ‘options’ ‘cmd’

Undocumented arguments in documentation object '.onLoad'
  ‘libname’ ‘pkgname’

Undocumented arguments in documentation object 'to_glt.contrast'
  ‘x’ ‘...’

Functions with \usage entries need to have the appropriate \alias
entries, and all their arguments documented.
The \usage entries must correspond to syntactically valid R code.
See chapter ‘Writing R documentation files’ in the ‘Writing R
Extensions’ manual.
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking LazyData ... NOTE
  'LazyData' is specified without a 'data' directory
* checking files in ‘vignettes’ ... WARNING
Files in the 'vignettes' directory but no files in 'inst/doc':
  ‘afni_tutorial.Rmd’
* checking examples ... OK
* checking for unstated dependencies in vignettes ... OK
* checking package vignettes in ‘inst/doc’ ... WARNING
Directory 'inst/doc' does not exist.
Package vignette without corresponding single PDF/HTML:
  ‘afni_tutorial.Rmd’
* checking running R code from vignettes ... ERROR
Errors in running code in vignettes:
when running code in ‘afni_tutorial.Rmd’
  ...
> con1 <- pair_contrast(~stim == "face", ~stim == "scene", 
+     name = "face_scene")

> emodel <- event_model(onset ~ hrf(stim, contrasts = con1), 
+     data = simple_design, block = ~run, sampling_frame = sframe)

  When sourcing ‘afni_tutorial.R’:
Error: Failed to evaluate term 'hrf(stim, contrasts = con1)': If `contrasts=` is a list, all elements must be contrast_spec objects.
  Hint: Use functions like contrast(), pair_contrast(), contrast_set() to define contrasts.
Execution halted

  ‘afni_tutorial.Rmd’ using ‘UTF-8’... failed
* checking re-building of vignette outputs ... SKIPPED
* DONE
Status: 1 ERROR, 7 WARNINGs, 5 NOTEs
